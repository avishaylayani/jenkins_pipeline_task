pipeline {
    agent {label 'workers'}
    parameters{
        string(name: 'APP_DIR', defaultValue: '/tmp/details_app', description: 'The Directory the app  project will be cloned to')
        string(name: 'SCRIPTS_EXT', defaultValue: '*.sh *.py', description: 'The extensions of all files we want to test, default is bash and python files')
        }
    stages {
        stage('Codespell and Shellcheck Prerequisitions') {
            steps {
                sh '''
                chmod +x "scripts/1_1_codespell&shell_pre.sh"
                bash "scripts/1_1_codespell&shell_pre.sh"
                '''
            }
        }
        stage('Codespell and Shellcheck Execution') {
            steps {
                sh '''
                chmod +x "scripts/1_2_codespell&shell_exec.sh"
                bash "scripts/1_2_codespell&shell_exec.sh"
                '''
            }
        }
    }
    post {
        always{
            archiveArtifacts artifacts: 'reports/codespell.md', followSymlinks: false, onlyIfSuccessful: true
            archiveArtifacts artifacts: 'reports/shellcheck.md', followSymlinks: false, onlyIfSuccessful: true
        }
    }
}
