pipeline {
    agent {label 'workers'}
    parameters{
        string(name: 'APP_DIR', defaultValue: '/tmp/details_app', description: 'The Directory the app  project will be cloned to')
        string(name: 'EXCLUSION_LIST', defaultValue:'.git .DS_Store .jpi .key .enc .lock .jpg .mp4 .ico .css', description:'The list of keywords that will not go through spell check')
    }
    stages {
        stage('Spellcheck Prerequisitions') {
            steps {
                sh '''
                chmod +x /home/jenkins/workspace/1_spell_check/scripts/0_1_spellcheck_pre.sh
                bash /home/jenkins/workspace/1_spell_check/scripts/0_1_spellcheck_pre.sh 
                '''
            }
        }
        stage('Spellcheck Execution') {
            steps {
                sh '''
                chmod +x /home/jenkins/workspace/1_spell_check/scripts/0_2_spellcheck_exec.sh
                bash /home/jenkins/workspace/1_spell_check/scripts/0_2_spellcheck_exec.sh
                '''
            }
        }
    }
    post {
        always{
            archiveArtifacts artifacts: 'reports/spell_check_report', followSymlinks: false, onlyIfSuccessful: true
        }
    }
    
}
